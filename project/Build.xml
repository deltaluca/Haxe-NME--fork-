<xml>

<set name="GCC_THIN_ARCHIVE" value="1" if="iphone"/>

<include name="${HXCPP}/build-tool/BuildCommon.xml"/>

<set name="sdl" value="1" if="linux"/>
<set name="sdl" value="1" if="macos"/>
<set name="sdl" value="1" if="windows"/>
<set name="ogl" value="1" if="windows"/>
<set name="ogl" value="1" if="sdl"/>
<set name="ogl" value="1" if="gph"/>
<set name="ogl" value="1" if="iphone"/>
<set name="ogl" value="1" if="android"/>

<set name="mobile" value="1" if="iphone"/>
<set name="mobile" value="1" if="android"/>
<set name="mobile" value="1" if="gph"/>

<files id="windows">
  <compilerflag value="-Iinclude"/>
  <compilerflag value="-I../../sdl-static/include"/>
  <compilerflag value="-I../../sdl-static/include/SDL12"/>
  <file name="windows/GDIFont.cpp"/>
  <!-- Use SDL on windows too ? -->
  <file name="windows/SimpleFrame.cpp" unless="sdl"/>
  <file name="sdl/SDLSound.cpp" unless="sdl"/>
</files>

<files id="mac">
  <compilerflag value="-Iinclude"/>
  <compilerflag value="-I../../sdl-static/include/SDL12"/>
  <file name="mac/NSFont.cpp"/>
  <file name="mac/MacBoot.m"/>
</files>

<files id="linux">
  <compilerflag value="-Iinclude"/>
  <file name="linux/NativeFont.cpp"/>
</files>

<files id="gph">
  <compilerflag value="-Iinclude"/>
  <compilerflag value="-I${GPH_ROOT}/gcc-4.2.4-glibc-2.7-eabi/arm-gph-linux-gnueabi/sys-root/usr/include"/>
  <compilerflag value="-I${GPH_ROOT}/include" if="gph"/>
  <compilerflag value="-I${GPH_ROOT}/include/freetype2" if="gph"/>
  <compilerflag value="-I${GPH_ROOT}/DGE/include" if="gph"/>
  <file name="linux/NativeFont.cpp"/>
  <file name="dge/DGEStage.cpp"/>
  <file name="dge/DGESound.cpp"/>
</files>


<files id="iphone">
  <compilerflag value="-Iinclude"/>
  <file name="iPhone/UIStageView.mm"/>
  <file name="iPhone/SurfaceIO.mm"/>
  <file name="iPhone/Sound.mm"/>
  <file name="iPhone/NativeFont.mm"/>
</files>

<files id="android">
  <compilerflag value="-Iinclude"/>
  <file name="android/AndroidSound.cpp"/>
  <file name="android/AndroidFont.cpp"/>
  <file name="android/AndroidFrame.cpp"/>
</files>

<files id="main">
  <compilerflag value="-Iinclude"/>
  <file name="Test.cpp"/>
</files>

<files id="sdl">
  <compilerflag value="-Iinclude"/>
  <compilerflag value="-I../../sdl-static/include" />
  <compilerflag value="-I../../sdl-static/include/SDL12"/>
  <file name="sdl/SDLStage.cpp"/>
  <file name="sdl/SDLSound.cpp"/>
</files>




<set name="THIRDPARTY_LIBS" value="../../sdl-static/lib/Mac/" if="macos"/>
<set name="THIRDPARTY_LIBS" value="../../sdl-static/lib/Windows/" if="windows"/>
<set name="THIRDPARTY_LIBS" value="../../sdl-static/lib/Linux${M64}/" if="linux"/>
<set name="THIRDPARTY_LIBS" value="../../sdl-static/lib/Android/" if="android"/>
<set name="THIRDPARTY_LIBS" value="../../sdl-static/lib/iPhone/" if="iphone"/>
<set name="THIRDPARTY_LIBS" value="${GPH_ROOT}/gcc-4.2.4-glibc-2.7-eabi/arm-gph-linux-gnueabi/sys-root/usr/lib/" if="gph"/>

<set name="SLIBEXT" value=".lib" if="windows"/>
<set name="SLIBEXT" value=".a" unless="windows"/>



<files id="common">
  <compilerflag value="-Iinclude"/>
  <compilerflag value="-I../../sdl-static/include" unless="gph"/>
  <compilerflag value="-I../../sdl-static/include/SDL12" if="sdl" unless="gph"/>
  <compilerflag value="-I${GPH_ROOT}/gcc-4.2.4-glibc-2.7-eabi/arm-gph-linux-gnueabi/sys-root/usr/include" if="gph"/>
  <compilerflag value="-I${GPH_ROOT}/include/freetype2" if="gph"/>
  <compilerflag value="-I${GPH_ROOT}/DGE/include" if="gph"/>
  <compilerflag value="-DSDL_OGL" if="sdl"/>
  <compilerflag value="-Wno-conversion" if="linux"/>

  <file name="common/Surface.cpp"/>
  <file name="common/Utils.cpp"/>
  <file name="common/Geom.cpp"/>
  <file name="common/Graphics.cpp"/>
  <file name="common/GraphicsData.cpp"/>
  <file name="common/Matrix.cpp"/>
  <file name="common/CachedExtent.cpp"/>
  <file name="common/TextField.cpp"/>
  <file name="common/Font.cpp"/>
  <file name="common/FreeType.cpp" unless="iphone"/>
  <file name="common/Tilesheet.cpp"/>
  <file name="common/Display.cpp"/>
  <file name="common/ColorTransform.cpp"/>
  <file name="common/Hardware.cpp"/>
  <file name="common/Filters.cpp"/>
  <file name="common/ExternalInterface.cpp"/>
  <file name="common/Cursors.cpp"/>
  <file name="common/Input.cpp"/>
  <file name="common/SurfaceIO.cpp" unless="iphone"/>
  <file name="common/ManagedStage.cpp"/>
  <file name="common/CURL.cpp"/>

  <file name="common/XML/tinystr.cpp"/>
  <file name="common/XML/tinyxml.cpp"/>
  <file name="common/XML/tinyxmlerror.cpp"/>
  <file name="common/XML/tinyxmlparser.cpp"/>

  <file name="software-renderer/PolygonRenderer.cpp"><depend name="software-renderer/Render.h"/></file>
  <file name="software-renderer/AlphaMask.cpp"><depend name="software-renderer/Render.h"/></file>
  <file name="software-renderer/SolidFill.cpp"><depend name="software-renderer/Render.h"/></file>
  <file name="software-renderer/GradientFill.cpp"><depend name="software-renderer/Render.h"/></file>
  <file name="software-renderer/BitmapFill.cpp"><depend name="software-renderer/Render.h"/></file>
  <file name="software-renderer/BitmapFillPersp.cpp"><depend name="software-renderer/Render.h"/></file>

  <file name="opengl/OpenGLContext.cpp" if="ogl"/>

</files>

<set name="tool" value="exe" unless="iphone"/>
<set name="tool" value="static" if="iphone"/>


<target id="TestWin" output="TestWin" tool="linker" toolid="${tool}">
  <files id="main"/>
  <files id="common"/>
  <files id="windows" if="windows"/>
  <files id="iphone" if="iphone"/>
  <files id="mac" if="macos"/>
  <files id="sdl" if="sdl"/>
  <lib name="${THIRDPARTY_LIBS}libfreetype${SLIBEXT}" unless="modile"/>
  <lib name="${THIRDPARTY_LIBS}libjpeg${SLIBEXT}" unless="modile"/>
  <lib name="${THIRDPARTY_LIBS}libpng${SLIBEXT}" unless="modile"/>
  <lib name="${THIRDPARTY_LIBS}zlib${SLIBEXT}" unless="modile"/>
  <lib name="${THIRDPARTY_LIBS}libSDL${SLIBEXT}" if="macos"/>

  <vflag name="-framework" value="IOKit" if="macos"/>
  <vflag name="-framework" value="UIKit" if="macos"/>
  <vflag name="-framework" value="ApplicationServices" if="macos"/>
  <vflag name="-framework" value="CoreAudio" if="macos"/>
  <vflag name="-framework" value="Carbon" if="macos"/>
  <vflag name="-framework" value="AudioToolbox" if="macos"/>
  <vflag name="-framework" value="AudioUnit" if="macos"/>
  <vflag name="-framework" value="ForceFeedback" if="macos"/>
  <vflag name="-framework" value="Cocoa" if="macos"/>
  <vflag name="-framework" value="OpenGL" if="macos"/>
  <vflag name="-framework" value="QuickTime" if="macos"/>


  <flag value="" if="windows"/>
  <flag value="gdi32.lib" if="windows"/>
  <flag value="opengl32.lib" if="windows"/>
  <outdir name="."/>
</target>


<set name="ndll-tool" value="dll" unless="iphone"/>
<set name="ndll-tool" value="static" if="iphone"/>
<set name="name_extra" value=".iphoneos" if="iphoneos"/>
<set name="name_extra" value=".iphonesim" if="iphonesim"/>

<set name="no_thirdparty_extras" value="1" if="iphone"/>
<set name="no_thirdparty_extras" value="1" if="gph"/>


<target id="NDLL" output="nme${name_extra}" tool="linker" toolid="${ndll-tool}">
  <outdir name="../ndll/${BINDIR}"/>
  <ext value=".ndll" unless="mobile"/>
  <ext value=".ndll" if="gph"/>

  <files id="common"/>
  <files id="windows" if="windows"/>
  <files id="iphone" if="iphone"/>
  <files id="mac" if="macos"/>
  <files id="linux" if="linux"/>
  <files id="gph" if="gph"/>
  <files id="sdl" if="sdl"/>
  <files id="android" if="android"/>

  <lib name="${THIRDPARTY_LIBS}libfreetype${SLIBEXT}" unless="no_thirdparty_extras"/>
  <lib name="${THIRDPARTY_LIBS}libjpeg${SLIBEXT}" unless="no_thirdparty_extras"/>
  <lib name="${THIRDPARTY_LIBS}libpng${SLIBEXT}" unless="no_thirdparty_extras"/>
  <lib name="${THIRDPARTY_LIBS}zlib${SLIBEXT}" if="windows"/>
  <lib name="${THIRDPARTY_LIBS}libz${SLIBEXT}" if="macos"/>
  <lib name="${THIRDPARTY_LIBS}libz${SLIBEXT}" if="linux"/>

  <lib name="${THIRDPARTY_LIBS}libSDL${SLIBEXT}" unless="mobile"/>
  <lib name="${THIRDPARTY_LIBS}libSDL_mixer${SLIBEXT}" unless="mobile"/>
  <lib name="${THIRDPARTY_LIBS}libvorbis${SLIBEXT}" unless="mobile"/>
  <lib name="${THIRDPARTY_LIBS}libogg${SLIBEXT}" unless="mobile"/>
  <lib name="${THIRDPARTY_LIBS}libsmpeg${SLIBEXT}" unless="mobile"/>
  <lib name="${THIRDPARTY_LIBS}libSDL${SLIBEXT}" unless="mobile"/>

  <lib name="${THIRDPARTY_LIBS}libcurl${name_extra}${SLIBEXT}" unless="iphone"/>

  <flag value="${THIRDPARTY_LIBS}libcurl${name_extra}/*.o" if="iphone"/>

  <vflag name="-framework" value="IOKit" if="macos"/>
  <vflag name="-framework" value="CoreAudio" if="macos"/>
  <vflag name="-framework" value="Carbon" if="macos"/>
  <vflag name="-framework" value="AudioToolbox" if="macos"/>
  <vflag name="-framework" value="AudioUnit" if="macos"/>
  <vflag name="-framework" value="ForceFeedback" if="macos"/>
  <vflag name="-framework" value="Cocoa" if="macos"/>
  <vflag name="-framework" value="OpenGL" if="macos"/>
  <vflag name="-framework" value="QuickTime" if="macos"/>

  <lib name="-ldl" if="android"/>
  <lib name="-lGLESv1_CM" if="android"/>
  <lib name="-lz" if="android"/>

  <lib name="gdi32.lib" if="windows"/>
  <lib name="opengl32.lib" if="windows"/>
  <lib name="user32.lib" if="windows"/>
  <lib name="kernel32.lib" if="windows"/>
  <lib name="advapi32.lib" if="windows"/>
  <lib name="ddraw.lib" if="windows"/>
  <lib name="dxguid.lib" if="windows"/>
  <lib name="winmm.lib" if="windows"/>
  <lib name="ws2_32.lib" if="windows"/>
  <lib name="wldap32.lib" if="windows"/>

  <lib name="-ldl" if="linux"/>
  <lib name="-lGL" if="linux"/>

  <flag value="-L${GPH_ROOT}/DGE/lib/target" if="gph"/>
  <lib name="-ldge20" if="gph"/>
  <lib name="-ldgx20" if="gph"/>
  <lib name="-lopengles_lite" if="gph"/>
  <lib name="-lfreetype" if="gph"/>
  <lib name="-lopenal11" if="gph"/>
  <lib name="-lopenalut11" if="gph"/>
  <lib name="-lts" if="gph"/>
  <lib name="-lpthread" if="gph"/>
  <lib name="-lpng" if="gph"/>
  <lib name="-ljpeg" if="gph"/>
  <lib name="-lz" if="gph"/>

</target>




<target id="default">
   <!-- <target id="TestWin"/> -->
   <target id="NDLL"/>
</target>


</xml>
