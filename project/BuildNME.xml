<xml>

<include name="${HXCPP}/build-tool/BuildCommon.xml"/>

<set name="SDLVER" value="SDL12" unless="iphone"/>
<set name="SDLVER" value="SDL13" if="iphone"/>

<files id="nme" dir="${RUNTIME}">
  <depend name="${HXCPP}/include/hxCFFI.h"/>

  <depend name="ByteArray.h"/>
  <depend name="DrawObject.h"/>
  <depend name="Gradient.h"/>
  <depend name="Matrix.h"/>
  <depend name="SDL_flic.h"/>
  <depend name="Scrap.h"/>
  <depend name="config.h"/>
  <depend name="net.h"/>
  <depend name="nme.h"/>
  <depend name="nsdl.h"/>
  <depend name="sound.h"/>
  <depend name="text.h"/>
  <depend name="texture_buffer.h"/>

  <depend name="renderer/AA.h"/>
  <depend name="renderer/Pixel.h"/>
  <depend name="renderer/Points.h"/>
  <depend name="renderer/QuickVec.h"/>
  <depend name="renderer/RenderPolygon.h"/>
  <depend name="renderer/Renderer.h"/>
  <depend name="renderer/TriangleRenderer.h"/>

  <compilerflag value="-I${HXCPP}/include"/>
  <compilerflag value="-I../../sdl-static/include"/>
  <compilerflag value="-I../../sdl-static/include/${SDLVER}"/>

  <compilerflag value="-DIPHONE" if="iphone"/>
  <compilerflag value="-D${SDLVER}" if="iphone"/>
  <compilerflag value="-I/usr/X11R6/include" if="apple"/>

  <compilerflag value="-DSTATIC_LINK" if="static"/>

  <file name="BitmapFilters.cpp"/>
  <file name="BlendSurface.cpp"/>
  <file name="ByteArray.cpp"/>
  <file name="Gradient.cpp"/>
  <file name="Matrix.cpp"/>
  <file name="Scrap.cpp" unless="apple"/>
  <file name="collision.cpp"/>
  <file name="draw_object.cpp"/>
  <file name="gl_helpers.cpp"/>
  <file name="net.cpp"/>
  <file name="nme.cpp"/>
  <file name="sound.cpp"/>
  <file name="sprite.cpp"/>
  <file name="Joystick.cpp"/>
  <file name="text.cpp"/>
  <file name="text_texture.cpp"/>
  <file name="texture_buffer.cpp"/>
  <file name="timer.cpp"/>
  <file name="MacBoot.m" if="macos"/>

  <file name="renderer/Polygon.cpp"/>
  <file name="renderer/PolygonMask.cpp"/>
  <file name="renderer/RenderBitmap.cpp"/>
  <file name="renderer/RenderGradient.cpp"/>
  <file name="renderer/RenderSolid.cpp"/>
  <file name="renderer/Utils.cpp"/>


</files>

<set name="SDLLIB" value="../../sdl-static/lib/mac/" if="macos"/>
<set name="SDLLIB" value="../../sdl-static/lib/iphoneos/" if="iphoneos"/>
<set name="SDLLIB" value="../../sdl-static/lib/Windows/" if="windows"/>
<set name="SDLLIB" value="../../sdl-static/lib/Linux/" if="linux"/>

<set name="SLIBEXT" value=".lib" if="windows"/>
<set name="SLIBEXT" value=".a" unless="windows"/>


<target id="nme" output="nme${DBG}" tool="linker" toolid="dll">
  <files id="nme"/>
  <ext value=".ndll"/>
  <outdir name="../ndll/${BINDIR}"/>
  <lib name="-lpthread" if="linux"/>
  <lib name="-lGL" if="linux"/>
  <lib name="${SDLLIB}libSDL_image${SLIBEXT}"/>
  <lib name="${SDLLIB}libSDL_mixer${SLIBEXT}"/>
  <lib name="${SDLLIB}libSDL_ttf${SLIBEXT}"/>
  <lib name="${SDLLIB}libSDLmain${SLIBEXT}" unless="linux"/>
  <lib name="${SDLLIB}libfreetype${SLIBEXT}"/>
  <lib name="${SDLLIB}libjpeg${SLIBEXT}"/>
  <lib name="${SDLLIB}libpng${SLIBEXT}"/>
  <lib name="${SDLLIB}libsmpeg${SLIBEXT}" unless="iphone"/>
  <lib name="${SDLLIB}libvorbis${SLIBEXT}"/>
  <lib name="${SDLLIB}libogg${SLIBEXT}"/>
  <lib name="${SDLLIB}libz${SLIBEXT}"/>
  <lib name="${SDLLIB}libSDL${SLIBEXT}"/>
  <vflag name="-framework" value="IOKit" if="apple"/>
  <vflag name="-framework" value="CoreAudio" if="apple"/>
  <vflag name="-framework" value="Carbon" if="apple"/>
  <vflag name="-framework" value="AudioToolbox" if="apple"/>
  <vflag name="-framework" value="AudioUnit" if="apple"/>
  <vflag name="-framework" value="ForceFeedback" if="apple"/>
  <vflag name="-framework" value="Cocoa" if="apple"/>
  <vflag name="-framework" value="OpenGL" if="apple"/>
  <vflag name="-framework" value="QuickTime" if="apple"/>

  <depend name="${SDLLIB}libSDL${SLIBEXT}"/>
  <depend name="${SDLLIB}libSDL_image${SLIBEXT}"/>
  <depend name="${SDLLIB}libSDL_mixer${SLIBEXT}"/>
  <depend name="${SDLLIB}libSDL_ttf${SLIBEXT}"/>
  <depend name="${SDLLIB}libSDLmain${SLIBEXT}" unless="linux"/>
  <depend name="${SDLLIB}libfreetype${SLIBEXT}"/>
  <depend name="${SDLLIB}libjpeg${SLIBEXT}"/>
  <depend name="${SDLLIB}libogg${SLIBEXT}"/>
  <depend name="${SDLLIB}libpng${SLIBEXT}"/>
  <depend name="${SDLLIB}libsmpeg${SLIBEXT}" unless="iphone"/>
  <depend name="${SDLLIB}libvorbis${SLIBEXT}"/>
  <depend name="${SDLLIB}libz${SLIBEXT}"/>
 
</target>

<target id="nme-static" output="libNME${DBG}${LIBEXTRA}" tool="linker" toolid="static">
  <files id="nme"/>
  <outdir name="../ndll/${BINDIR}"/>
</target>



<target id="default">
   <target id="nme" unless="iphone"/>
   <target id="nme-static" if="iphone"/>
</target>

<target id="clean" tool="clean">
  <files id="nme"/>
</target>


</xml>
